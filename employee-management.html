<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Hub - Advanced CRM Dashboard</title>
    <link rel="stylesheet" href="employee-management.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="container">
        <div class="content">
            <h2><span class="material-symbols-outlined">badge</span> Employee Hub (Advanced CRM Dashboard)</h2>
            <div class="qc-navigation">
                <button class="nav-button active" data-section="employee-records-section">
                    <span class="material-symbols-outlined">folder_shared</span> Employee Records & Profiles
                </button>
                <button class="nav-button" data-section="activity-tracking-section">
                    <span class="material-symbols-outlined">track_changes</span> Activity Tracking & Logging
                </button>
                <button class="nav-button" data-section="performance-monitoring-section">
                    <span class="material-symbols-outlined">monitoring</span> Performance Monitoring
                </button>
                <button class="nav-button" data-section="internal-communication-section">
                    <span class="material-symbols-outlined">forum</span> Internal Communication
                </button>
                <button class="nav-button" data-section="dashboard-wide-features-section">
                    <span class="material-symbols-outlined">settings_suggest</span> Dashboard-Wide Features
                </button>
            </div>

            <section id="employee-records-section" class="active">
                <h3><span class="material-symbols-outlined">folder_shared</span> Employee Records & Profiles</h3>
                <div class="controls">
                    <h4>Employee Profiles</h4>
                    <button class="action-button inline-add-button" onclick="openAddEmployeeModal()">
                        <span class="material-symbols-outlined">person_add</span> Add Employee
                    </button>
                </div>
                <div class="data-table-container">
                    <table id="employee-table" class="data-table">
                        <thead>
                            <tr>
                                <th class="filterable" data-type="text" data-column="employeeId">Employee ID <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="name">Name <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="designation">Designation <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="department">Department <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="contact">Contact <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="shift">Shift <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="location">Location <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="date" data-column="joinDate">Join Date <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="status">Status <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="documents">Documents <span class="arrow">▼</span></th>
                                <th>Actions</th>
                            </tr>
                            <tr class="filter-row hidden">
                                <td><input type="text" class="filter-input" data-column="employeeId" placeholder="Employee ID"></td>
                                <td><input type="text" class="filter-input" data-column="name" placeholder="Name"></td>
                                <td><input type="text" class="filter-input" data-column="designation" placeholder="Designation"></td>
                                <td><input type="text" class="filter-input" data-column="department" placeholder="Department"></td>
                                <td><input type="text" class="filter-input" data-column="contact" placeholder="Contact"></td>
                                <td><input type="text" class="filter-input" data-column="shift" placeholder="Shift"></td>
                                <td><input type="text" class="filter-input" data-column="location" placeholder="Location"></td>
                                <td><input type="date" class="filter-input" data-column="joinDate" placeholder="Join Date"></td>
                                <td><input type="text" class="filter-input" data-column="status" placeholder="Status"></td>
                                <td><input type="text" class="filter-input" data-column="documents" placeholder="Documents"></td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="employee-table-body">
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="activity-tracking-section" style="display: none;">
                <h3><span class="material-symbols-outlined">track_changes</span> Activity Tracking & Logging</h3>
                <div class="controls">
                    <h4>Activity Logs</h4>
                    <button class="action-button inline-add-button" onclick="openLogActivityModal()">
                        <span class="material-symbols-outlined">add</span> Log Activity
                    </button>
                </div>
                <div class="data-table-container">
                    <table id="activity-log-table" class="data-table">
                        <thead>
                            <tr>
                                <th class="filterable" data-type="text" data-column="employeeId">Employee ID <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="date" data-column="logDate">Date <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="activityType">Activity Type <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="description">Description <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="number" data-column="hoursActive">Hours Active <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="moduleAccessed">Module Accessed <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="geoTag">Geo Tag <span class="arrow">▼</span></th>
                                <th>Actions</th>
                            </tr>
                            <tr class="filter-row hidden">
                                <td><input type="text" class="filter-input" data-column="employeeId" placeholder="Employee ID"></td>
                                <td><input type="date" class="filter-input" data-column="logDate" placeholder="Select Date"></td>
                                <td><input type="text" class="filter-input" data-column="activityType" placeholder="Activity Type"></td>
                                <td><input type="text" class="filter-input" data-column="description" placeholder="Description"></td>
                                <td><input type="number" class="filter-input" data-column="hoursActive" placeholder="Hours Active"></td>
                                <td><input type="text" class="filter-input" data-column="moduleAccessed" placeholder="Module"></td>
                                <td><input type="text" class="filter-input" data-column="geoTag" placeholder="Geo Tag"></td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="activity-log-table-body">
                        </tbody>
                    </table>
                </div>
                <div class="chart-container">
                    <h4>Daily CRM Usage Summary</h4>
                    <canvas id="crm-usage-chart"></canvas>
                </div>
            </section>

            <section id="performance-monitoring-section" style="display: none;">
                <h3><span class="material-symbols-outlined">monitoring</span> Performance Monitoring</h3>
                <div class="controls">
                    <h4>Employee KPIs</h4>
                    <button class="action-button inline-add-button" onclick="openSetKpiModal()">
                        <span class="material-symbols-outlined">add_chart</span> Set/Update KPI
                    </button>
                </div>
                <div class="data-table-container">
                    <table id="kpi-table" class="data-table">
                        <thead>
                            <tr>
                                <th class="filterable" data-type="text" data-column="employeeId">Employee ID <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="kpiName">KPI Name <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="role">Role <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="number" data-column="target">Target <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="number" data-column="actual">Actual <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="number" data-column="achievement">Achievement (%) <span class="arrow">▼</span></th>
                                <th class="filterable" data-type="text" data-column="status">Status <span class="arrow">▼</span></th>
                                <th>Actions</th>
                            </tr>
                            <tr class="filter-row hidden">
                                <td><input type="text" class="filter-input" data-column="employeeId" placeholder="Employee ID"></td>
                                <td><input type="text" class="filter-input" data-column="kpiName" placeholder="KPI Name"></td>
                                <td><input type="text" class="filter-input" data-column="role" placeholder="Role"></td>
                                <td><input type="number" class="filter-input" data-column="target" placeholder="Target"></td>
                                <td><input type="number" class="filter-input" data-column="actual" placeholder="Actual"></td>
                                <td><input type="number" class="filter-input" data-column="achievement" placeholder="Achievement"></td>
                                <td><input type="text" class="filter-input" data-column="status" placeholder="Status"></td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id="kpi-table-body">
                        </tbody>
                    </table>
                </div>
                <div class="chart-container">
                    <h4>Employee Performance Leaderboard</h4>
                    <canvas id="performance-leaderboard-chart"></canvas>
                </div>
            </section>

            <section id="internal-communication-section" style="display: none;">
                <h3><span class="material-symbols-outlined">forum</span> Internal Communication</h3>
                <div class="communication-tools">
                    <button class="action-button" id="team-message-button">
                        <span class="material-symbols-outlined">chat</span> Team Message
                    </button>
                    <button class="action-button" id="broadcast-announcement-button">
                        <span class="material-symbols-outlined">campaign</span> Broadcast Announcement
                    </button>
                    <button class="action-button" id="file-sharing-button">
                        <span class="material-symbols-outlined">folder_open</span> File Sharing
                    </button>
                    <button class="action-button" id="hr-feedback-button">
                        <span class="material-symbols-outlined">feedback</span> HR Feedback Forms
                    </button>
                </div>
                <div class="message-log">
                    <h4>Communication Log</h4>
                    <ul id="internal-message-list"></ul>
                </div>
            </section>

            <section id="dashboard-wide-features-section" style="display: none;">
                <h3><span class="material-symbols-outlined">settings_suggest</span> Dashboard-Wide Features</h3>
                <div class="global-features-options">
                    <h4>Global Settings & Tools</h4>
                    <button class="action-button" onclick="openRoleBasedAccessModal()">
                        <span class="material-symbols-outlined">admin_panel_settings</span> Role-Based Access Control
                    </button>
                    <button class="action-button" onclick="openImportExportToolsModal()">
                        <span class="material-symbols-outlined">import_export</span> Import/Export Tools
                    </button>
                    <button class="action-button" onclick="openAnomalyDetectionModal()">
                        <span class="material-symbols-outlined">crisis_alert</span> AI Anomaly Detection
                    </button>
                     <button class="action-button" onclick="openModuleSyncModal()">
                        <span class="material-symbols-outlined">sync_alt</span> Module Sync Status
                    </button>
                </div>
                <div class="chart-container">
                    <h4>System Usage Overview (Placeholder)</h4>
                    <div class="system-usage-overview-placeholder">
                        <p>Visual overview of system accessibility and multi-location/shift support status.</p>
                        <ul>
                            <li>Responsive Interface: Mobile, Tablet, Desktop (Live status)</li>
                            <li>Multi-Location Support: Enabled for all regions.</li>
                            <li>Shift Management: Configured for 24x7 operations.</li>
                        </ul>
                    </div>
                </div>
            </section>


            <div id="add-employee-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeAddEmployeeModal()">&times;</span>
                    <h4>Add New Employee</h4>
                    <form id="add-employee-form">
                        <div class="form-group">
                            <label for="employee-name">Employee Name:</label>
                            <input type="text" id="employee-name" name="employee-name" required pattern="^[A-Za-z\s\-']+$" maxlength="50" title="Employee Name should not exceed 50 characters" placeholder="Enter Employee Name"/>
                        </div>
                        <div class="form-group">
                            <label for="employee-designation">Designation:</label>
                            <input type="text" id="employee-designation" name="designation" required maxlength="50" placeholder="Enter Designation"/>
                        </div>
                        <div class="form-group">
                            <label for="employee-department">Department:</label>
                            <input type="text" id="employee-department" name="department" required maxlength="50" placeholder="Enter Department"/>
                        </div>
                        <div class="form-group">
                            <label for="employee-contact">Contact:</label>
                            <input type="tel" id="employee-contact" name="contact" required pattern="^[6-9]{1}[0-9]{9}$" maxlength="10" title="Contact number must start with 6-9 and have 10 digits" placeholder="Enter 10-digit Contact Number" />
                        </div>
                        <div class="form-group">
                            <label for="employee-shift">Shift:</label>
                            <input type="text" id="employee-shift" name="shift" placeholder="e.g., Day, Night, General"/>
                        </div>
                        <div class="form-group">
                            <label for="employee-location">Location:</label>
                            <input type="text" id="employee-location" name="location" placeholder="e.g., Bengaluru, Field"/>
                        </div>
                        <div class="form-group">
                            <label for="employee-join-date">Join Date:</label>
                            <input type="date" id="employee-join-date" name="join-date" required/>
                        </div>
                        <div class="form-group">
                            <label for="employee-status">Status:</label>
                            <select id="employee-status" name="status" required>
                                <option value="Active">Active</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Terminated">Terminated</option>
                                <option value="Flagged">Flagged</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="employee-documents">Document Uploads (KYC, Contracts):</label>
                            <input type="file" id="employee-documents" name="documents" accept="image/*,.pdf" multiple>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Add Employee</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="log-activity-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeLogActivityModal()">&times;</span>
                    <h4>Log Employee Activity</h4>
                    <form id="log-activity-form">
                        <div class="form-group">
                            <label for="activity-employee-id">Employee ID:</label>
                            <input type="text" id="activity-employee-id" name="employee-id" required pattern="^[A-Za-z0-9]{5}$" title="Employee ID must be 5 alphanumeric characters" maxlength="5" placeholder="Enter Employee ID"/>
                        </div>
                        <div class="form-group">
                            <label for="activity-date">Date:</label>
                            <input type="date" id="activity-date" name="log-date" required/>
                        </div>
                        <div class="form-group">
                            <label for="activity-type">Activity Type:</label>
                            <input type="text" id="activity-type" name="activity-type" required maxlength="100" placeholder="e.g., Data Entry, Field Visit, Support Call"/>
                        </div>
                        <div class="form-group">
                            <label for="activity-description">Description:</label>
                            <textarea id="activity-description" name="description" rows="4" placeholder="Detailed description of the activity"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="activity-hours">Hours Active:</label>
                            <input type="number" id="activity-hours" name="hours-active" min="0" step="0.5" placeholder="e.g., 8.5"/>
                        </div>
                        <div class="form-group">
                            <label for="activity-module">Module Accessed (Optional):</label>
                            <input type="text" id="activity-module" name="module-accessed" placeholder="e.g., Farmer Database, Milk Tracking"/>
                        </div>
                        <div class="form-group">
                            <label for="activity-geo-tag">GPS Geo Tag (Optional):</label>
                            <input type="text" id="activity-geo-tag" name="geo-tag" placeholder="e.g., Lat: 12.9716, Lon: 77.5946"/>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Log Activity</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="set-kpi-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeSetKpiModal()">&times;</span>
                    <h4>Set/Update Employee KPI</h4>
                    <form id="set-kpi-form">
                        <div class="form-group">
                            <label for="kpi-employee-id">Employee ID:</label>
                            <input type="text" id="kpi-employee-id" name="employee-id" required pattern="^[A-Za-z0-9]{5}$" title="Employee ID must be 5 alphanumeric characters" maxlength="5" placeholder="Enter Employee ID"/>
                        </div>
                        <div class="form-group">
                            <label for="kpi-name">KPI Name:</label>
                            <input type="text" id="kpi-name" name="kpi-name" required maxlength="100" placeholder="e.g., Customer Satisfaction Score"/>
                        </div>
                        <div class="form-group">
                            <label for="kpi-role">Role:</label>
                            <input type="text" id="kpi-role" name="role" placeholder="e.g., Support Agent, Field Staff"/>
                        </div>
                        <div class="form-group">
                            <label for="kpi-target">Target:</label>
                            <input type="number" id="kpi-target" name="target" required min="0" step="0.01" placeholder="Enter Target Value"/>
                        </div>
                        <div class="form-group">
                            <label for="kpi-actual">Actual (Current):</label>
                            <input type="number" id="kpi-actual" name="actual" min="0" step="0.01" placeholder="Enter Actual Value"/>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Save KPI</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="team-message-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h4>Send Team Message</h4>
                    <form id="team-message-form">
                        <div class="form-group">
                            <label for="message-recipient-type">Send To:</label>
                            <select id="message-recipient-type" name="recipient-type">
                                <option value="individual">Individual Employee</option>
                                <option value="department">Department</option>
                            </select>
                        </div>
                        <div class="form-group" id="message-individual-recipient-group">
                            <label for="message-employee-id">Employee ID:</label>
                            <input type="text" id="message-employee-id" name="employee-id" pattern="^[A-Za-z0-9]{5}$" maxlength="5" placeholder="Enter Employee ID"/>
                        </div>
                        <div class="form-group" id="message-department-recipient-group" style="display: none;">
                            <label for="message-department">Department:</label>
                            <input type="text" id="message-department" name="department" placeholder="Enter Department Name"/>
                        </div>
                        <div class="form-group">
                            <label for="message-content">Message:</label>
                            <textarea id="message-content" name="message" rows="5" required placeholder="Enter your message"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Send Message</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="broadcast-announcement-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h4>Send Broadcast Announcement</h4>
                    <form id="broadcast-announcement-form">
                        <div class="form-group">
                            <label for="announcement-title">Title:</label>
                            <input type="text" id="announcement-title" name="title" required maxlength="100" placeholder="Enter Announcement Title"/>
                        </div>
                        <div class="form-group">
                            <label for="announcement-message">Message:</label>
                            <textarea id="announcement-message" name="message" rows="6" required placeholder="Enter your announcement message"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Send Broadcast</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="file-sharing-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h4>Share Files</h4>
                    <form id="file-sharing-form">
                        <div class="form-group">
                            <label for="file-upload">Select File(s):</label>
                            <input type="file" id="file-upload" name="files" multiple>
                        </div>
                        <div class="form-group">
                            <label for="file-share-recipient-type">Share With:</label>
                            <select id="file-share-recipient-type" name="recipient-type">
                                <option value="individual">Individual Employee</option>
                                <option value="department">Department</option>
                                <option value="all">All Employees</option>
                            </select>
                        </div>
                        <div class="form-group" id="file-share-individual-recipient-group" style="display: none;">
                            <label for="file-share-employee-id">Employee ID:</label>
                            <input type="text" id="file-share-employee-id" name="employee-id" pattern="^[A-Za-z0-9]{5}$" maxlength="5" placeholder="Enter Employee ID"/>
                        </div>
                        <div class="form-group" id="file-share-department-recipient-group" style="display: none;">
                            <label for="file-share-department">Department:</label>
                            <input type="text" id="file-share-department" name="department" placeholder="Enter Department Name"/>
                        </div>
                        <div class="form-group">
                            <label for="file-description">Description (Optional):</label>
                            <textarea id="file-description" name="description" rows="3" placeholder="Brief description of the files"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Share Files</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="hr-feedback-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h4>HR Feedback & Requests</h4>
                    <form id="hr-feedback-form">
                        <div class="form-group">
                            <label for="hr-feedback-employee-id">Your Employee ID:</label>
                            <input type="text" id="hr-feedback-employee-id" name="employee-id" required pattern="^[A-Za-z0-9]{5}$" maxlength="5" placeholder="Enter Your Employee ID"/>
                        </div>
                        <div class="form-group">
                            <label for="hr-feedback-type">Type of Request/Feedback:</label>
                            <select id="hr-feedback-type" name="feedback-type" required>
                                <option value="" disabled selected hidden>Select Type</option>
                                <option value="Grievance">Grievance</option>
                                <option value="Suggestion">Suggestion</option>
                                <option value="Leave Request">Leave Request</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="hr-feedback-message">Message/Details:</label>
                            <textarea id="hr-feedback-message" name="message" rows="6" required placeholder="Describe your grievance, suggestion, or leave details"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="action-button">Submit to HR</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="role-based-access-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeRoleBasedAccessModal()">&times;</span>
                    <h4>Role-Based Access Control</h4>
                    <p>Granular permissions management for CRM modules and data access would be configured here.</p>
                </div>
            </div>

            <div id="import-export-tools-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeImportExportToolsModal()">&times;</span>
                    <h4>Import/Export Tools</h4>
                    <p>Options for bulk import of employee data and export of logs/reports to various formats (Excel, PDF, JSON).</p>
                </div>
            </div>

            <div id="anomaly-detection-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeAnomalyDetectionModal()">&times;</span>
                    <h4>AI Anomaly Detection</h4>
                    <p>This section would display AI-powered insights to detect unusual employee activity, potential fraud, or prolonged inactivity.</p>
                </div>
            </div>

            <div id="module-sync-modal" class="modal content-display" style="display: none;">
                <div class="modal-content">
                    <span class="close-button" onclick="closeModuleSyncModal()">&times;</span>
                    <h4>Module Sync Status</h4>
                    <p>Overview of real-time integration status with other modules like HRMS, Payroll, Quality, Logistics, and Support.</p>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="employee-management.js"></script>
</body>
</html>